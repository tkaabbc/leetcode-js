/**
 * æ³¨ï¼šè¿™ä¸ªç‰ˆæœ¬çš„è§£æ³•æ„Ÿè§‰ä¸å¦‚å¦ä¸€ä¸ªäºŒç»´æ ‡å‡†çš„é€šç”¨ï¼Œå¯ä»¥ç”¨æ¥å‚è€ƒï¼Œå¤šä¸ªæ€è·¯
 * äºŒç»´dpçš„è§£æ³•ä¸»è¦è¿˜æ˜¯çœ‹ 01èƒŒåŒ…-äºŒç»´dpæ•°ç»„æ ‡å‡†ç‰ˆæœ¬.js è¿™ä¸ªæ–‡ä»¶çš„å§ï½
 * @param {number[]} weight ç‰©å“é‡é‡
 * @param {number[]} value ç‰©å“ä»·å€¼
 * @param {number} n ç‰©å“æ•°é‡
 * @param {number} w èƒŒåŒ…æœ€å¤§æ‰¿é‡
 */
function knapsack(weight, value, n, w) {
  let memo = genTable(n, w+1)
  memo[0][0] = 0
  memo[0][weight[0]] = value[0]
  for (let i = 1; i < n; i++) {
    for (let j = 0; j <= w; j++) { // ä¸æ”¾ç¬¬iä¸ª
      if (memo[i-1][j] >= 0) {
        memo[i][j] = memo[i-1][j]
      }
    }

    for (let j = 0; j <= w - weight[i]; j++) { // æ”¾ç¬¬iä¸ª è¿™å—ä¸æ‡‚ æ‰“å°çœ‹çœ‹
      if (memo[i-1][j] >= 0) { //åªå¯¹0æˆ–ä¹‹å‰å·²ç»æ”¾è¿‡çš„é‡é‡åŸºç¡€ä¹‹ä¸Šè¿›ä¸€æ­¥è€ƒå¯Ÿï¼›å› ä¸ºä¸å¯èƒ½å‡­ç©ºçªç„¶è¾¾åˆ°æŸä¸ªé‡é‡ã€‚
        console.log(memo[i-1][j]);
        console.log(memo); // æ‰“å°è¡¨æ ¼
        // è¿™é‡Œçš„æ€è·¯æ˜¯è¿™æ ·çš„
        // ç”»å‡ºè¡¨æ ¼
        // è€ƒè™‘ç¬¬iä¸ªç‰©å“ï¼Œä¹Ÿå°±æ˜¯è¡¨æ ¼ç¬¬iè¡Œï¼Œ
        // å¦‚æœæ”¾å…¥è¯¥ç‰©å“ä¹‹åï¼Œä¸å¦å¤–é‡é‡ç›¸åŒçš„æ–¹æ¡ˆå¯¹æ¯”ï¼Œè‹¥ä»·å€¼æ›´é«˜ï¼Œé‚£å°±æ”¾å…¥ï¼ˆmemo[i-1][j] + value[i] > memo[i][j + weight[i]]ï¼‰
        // å¹¶ä¸”è¾ƒä½çš„æ–¹æ¡ˆå°±è¢«èˆå¼ƒ
        // f[i][v]=max{f[i-1][v],f[i-1][v-c[i]]+w[i]}
        // ğŸ‘‡ä»£ç å®ç°å°±æ˜¯ä¸‹é¢è¿™æ ·
        // memo[i][j + weight[i]] = Math.max(memo[i][j + weight[i]], memo[i-1][j] + value[i])
        /**
         * å‰i-1ä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸ºvçš„èƒŒåŒ…ä¸­â€ï¼Œä»·å€¼ä¸ºf[i-1][v]ï¼›å¦‚æœæ”¾ç¬¬iä»¶ç‰©å“ï¼Œé‚£ä¹ˆé—®é¢˜å°±è½¬åŒ–ä¸ºâ€œå‰i-1ä»¶ç‰©å“æ”¾å…¥å‰©ä¸‹çš„å®¹é‡ä¸ºv-c[i]çš„èƒŒåŒ…ä¸­â€ï¼Œæ­¤æ—¶èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼å°±æ˜¯f[i-1][v-c[i]]å†åŠ ä¸Šé€šè¿‡æ”¾å…¥ç¬¬iä»¶ç‰©å“è·å¾—çš„ä»·å€¼w[i]ã€‚
         */
        let v1 = memo[i-1][j] + value[i] // æ”¾ï¼›è¿™é‡Œç”¨i-1è€Œä¸ç”¨ièƒ½é¿å…é‡å¤è®¡ç®—ï¼Œå› ä¸ºmemo[i]åœ¨ä¸‹é¢v2=v1ä¹‹åä¼šå˜åŒ–
        let v2 = memo[i][j + weight[i]] // ä¸æ”¾ï¼›
        memo[i][j + weight[i]] = Math.max(v1, v2)
      }
    }
  }

  let maxValue = -1
  for (let j = 0; j <= w; j++) {
    if (memo[n-1][j] > maxValue) {
      maxValue = memo[n-1][j]
    }
  }
  return maxValue
}

function genTable(y, x) {
  var arr = [];
  var n=1;
  for(var i = 0;i < y; i++){
    arr[i] = [];
    for(var j = 0;j < x; j++){
      arr[i][j] = -1;
    }
  }
  return arr
}

const weight = [2,2,4,6,3]
const value = [1,4,5,4,3]
const n = weight.length
const w = 6
/**
 * çºµåæ ‡è¡¨ç¤ºè€ƒå¯Ÿç¬¬å‡ ä¸ªç‰©å“
 * è¡¨æ ¼é‡Œçš„æ•°å­—è¡¨ç¤ºï¼šç¬¬iä¸ªç‰©å“ï¼Œæ¨ªåæ ‡å®¹é‡ä¸‹èƒ½è£…çš„æœ€å¤§ä»·å€¼
 * æ¨ªåæ ‡è¡¨ç¤ºå®¹é‡0  1  2  3  4  5  6
  é‡é‡ ä»·å€¼  [ 
  w=2  v=1  [ 0, -1, 1, -1, -1, -1, -1 ],
  w=2  v=4  [ 0, -1, 4, -1, 5, -1, -1 ],
  w=4  v=5  [ 0, -1, 4, -1, 5, -1, 9 ],
  w=6  v=4  [ 0, -1, 4, -1, 5, -1, 9 ],
  w=3  v=3  [ 0, -1, 4, 3, 5, -1, 9 ]
          ]
 */
console.log(knapsack(weight, value, n, w));

/**
 * æ€è·¯
 * æš´åŠ›æ³•ï¼š
 * æ¯ä¸ªéƒ½æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œæ”¾orä¸æ”¾ï¼Œé€’å½’ä¸‹å»
 * 
 * dpæ³•ï¼š
 * ç²¾é«“æ˜¯dpæ–¹ç¨‹
 * states[i][v] = max(state[i - 1][v], state[i - 1, v - Ci] + Wi)
 */